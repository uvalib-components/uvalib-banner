<link rel="import" href="../uvalib-models/uvalib-model-banners.html">
<link rel="import" href="../iron-swiper/iron-swiper.html">
<link rel="import" href="uvalib-banner.html">

<dom-module id="uvalib-banners">

  <template>

    <style>
      :host {
        display: block;
        height: 300px;
        background-color: blue;
      }
      uvalib-banner {
        height: 300px;
      }
      iron-swiper {
        height: 100%;
      }
    </style>

    <uvalib-model-banners data="{{_bannersBuffer}}"></uvalib-model-banners>
      <iron-swiper loop a11y keyboard-control pagination pagination-clickable>
          <template is="dom-repeat" items="[[_banners]]" as="banner">
            <uvalib-banner
                uuid$="[[banner.uuid]]"
                narrow-text$="[[banner.narrowText]]"
                large-screen$="[[largeScreen]]"
                medium-screen$="[[mediumScreen]]"
                banner-link$="[[banner.link]]"
                large-image-uuid$="[[banner.desktopImage.uuid]]"
                medium-image-uuid$="[[banner.tabletImage.uuid]]"
                small-image-uuid$="[[banner.phoneImage.uuid]]"
                display-title$="[[banner.displayTitle]]"
                banner-title$="[[banner.title]]"
                banner-body$="[[banner.body]]"
                button-text$="[[banner.buttonText]]"
                shady-mobile$="[[banner.shadyMobile]]"
                shady-tablet$="[[banner.shadyTablet]]"
                tone$="[[banner.tone]]"
                shady-desktop$="[[banner.shadyDesktop]]"></uvalib-banner>
          </template>
      </iron-swiper>

  </template>

  <script>
    Polymer({
      is: 'uvalib-banners',

      properties: {
        mediumScreen: {
          type: Boolean,
          value: false
        },
        largeScreen: {
          type: Boolean,
          value: false
        },
        _bannersBuffer: {
          type: Array,
          value: function(){
            return [];
          },
          observer: "_bannersBufferChange"
        },
        _banners: {
          type: Array,
//          observer: "_bannersChange",
          value: function(){
            return [];
          }
        }
      },

      _bannersBufferChange: function(){
        this.debounce('bannerbounce', function(){
          if (this._bannersBuffer && this._bannersBuffer.length >= 1) {
            this.set('_banners', this._bannersBuffer);
          }
        }, 500);
      }
    });
  </script>
</dom-module>
