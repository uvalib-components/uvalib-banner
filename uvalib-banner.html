<link rel="import" href="../uvalib-theme/uvalib-ui-element.html">
<link rel="import" href="../paper-button/paper-button.html">
<link rel="import" href="../uvalib-theme/uvalib-theme.html">
<link rel="import" href="../uva-models/uva-library.html">
<link rel="import" href="../iron-swiper/iron-swiper.html">
<link rel="import" href="../iron-image/iron-image.html">

<dom-module id="uvalib-banner">
  <template>
    <custom-style>
      <style include="uvalib-theme">
        :host {
          display: block;
          width: 100%;
        }
        iron-swiper {
          width: 100%;
          height: 100%;
        }
        iron-image {
          height: 100%;
          width: 100%;
        }
      </style>
    </custom-style>
    <uva-library path="web/banners" last-response="{{banners}}"></uva-library>
    <iron-swiper id="main" selected="{{selected}}">
      <template is="dom-repeat" items="[[banners]]" as="banner">
        <div>
          <iron-image sizing="cover" src$="[[_getImage(banner)]]" alt$="[[_getAlt(banner)]]" style="position:absolute;top:0;right:0;bottom:0;left:0;"></iron-image>
        </div>
      </template>
    </iron-swiper>
<!--
    <iron-swiper id="thumbs" selected="{{selected}}">
    </iron-swiper>
  -->
  </template>

  <script>
    /**
     * `uvalib-banner`
     *
     *
     * @customElement
     * @polymer
     * @demo demo/index.html
     */
    class UvalibBanner extends UvalibUiElement {
      static get is() { return 'uvalib-banner'; }
      static get properties() {
        return Object.assign(super.properties,{});
      }
      //Concat the this elements template with the parents
      static get template() {
        var parentTemplate = UvalibUiElement.template.cloneNode(true);
        var childTemplate = Polymer.DomModule.import('uvalib-banner', 'template');
        parentTemplate.content.insertBefore(childTemplate.content,null);
        return parentTemplate;
      }
      _getImage(banner) {
        return (this.largeScreen)? banner.desktopImage.url:
                              (this.mediumScreen)? banner.tabletImage.url:
                                              banner.phoneImage.url;
      }
      _getAlt(banner) {
        return (this.largeScreen)? banner.desktopImage.alt:
                              (this.mediumScreen)? banner.tabletImage.alt:
                                              banner.phoneImage.alt;
      }
    }

    window.customElements.define(UvalibBanner.is, UvalibBanner);
  </script>
</dom-module>
