<link rel="import" href="../uvalib-models/uvalib-model-query.html">
<link rel="import" href="../uva-swiper/uva-swiper.html">
<link rel="import" href="../uvalib-images/uvalib-image.html">

<dom-module id="uvalib-typed-banners">

  <template>

    <style>
      :host {
        display: block;
        height: 100%;
        /*
        background-color: blue;
        */
      }
      uva-swiper {
        height: 100%;
      }
      .main uvalib-image {
        background-color: white;
      }
      uva-swiper.nav {
        height: 100px;
      }
      uvalib-image {
        height: 100%;
      }
      .nav uvalib-image {
        width: 130px;
      }
    </style>
    <h1>[[selected]]</h1>

    <uvalib-model-query data="{{_images}}" content-type="mediaobjects" order-by="association" equal-to="100objectsCarousel"></uvalib-model-query>
      <uva-swiper class="main" a11y keyboard-control navigation-buttons selected="{{selected}}">
          <template is="dom-repeat" items="[[_images]]" as="image">
            <uvalib-image alt$="{{image.title}}" uuid$="{{image.image.uuid}}" sizing="contain"></uvalib-image>
          </template>
      </uva-swiper>
      <uva-swiper class="nav" a11y keyboard-control touch-ratio="0.2" slide-to-clicked-slide centered-slides slides-per-view="auto" selected="{{selected}}">
          <template is="dom-repeat" items="[[_images]]" as="image">
            <uvalib-image thumb alt$="{{image.title}}" uuid$="{{image.image.uuid}}" sizing="crop" style=""></uvalib-image>
          </template>
      </uva-swiper>
  </template>

  <script>
    Polymer({
      is: 'uvalib-typed-banners',

      properties: {
        mediumScreen: {
          type: Boolean,
          value: false
        },
        largeScreen: {
          type: Boolean,
          value: false
        },
        _bannersBuffer: {
          type: Array,
          value: function(){
            return [];
          },
          observer: "_bannersBufferChange"
        },
        _banners: {
          type: Array,
          value: function(){
            return [];
          }
        }
      },
      _bannersBufferChange: function(){
        this.debounce('bannerbounce', function(){
          if (this._bannersBuffer && this._bannersBuffer.length >= 1) {
            this.set('_banners', this._bannersBuffer);
          }
        }, 500);
      }
    });
  </script>
</dom-module>
